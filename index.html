<!doctype html>
<html>
	<head>
		<meta charset='utf-8'>
		<title>Portfolio</title>
		<link rel="stylesheet" href="css/main.css">
	</head>
	<body>
		<div class="popUp__container">
			<div id="popUp">
				<div class="popUp__name">
					<p id="popUp__title">
						<span id="lable__title">Название:</span>
						<span id="name">CS</span>
					</p>
					<p id="popUp__descrition">
						<span id="lable__descrition">Что использовалось:</span>
						<span id="skillUse">HTML, CSS, JS, google map API</span>
					</p>
					<div id="popUp__vueLink">
						<span id="lable__vueLink">Ссылки для просмотра:</span>
						<p id="vueLink__container">
							<a href=""></a>
						</p>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<ul class="hex__list">
		    <li class="list__item">
	        <div class="hexCont">
            <div class="hexagon hexagonDone hexagon--one">
							<span class="vueBlock">
								<a class="vueBlock__link" href="0">Vue link</a>
							</span>
						</div>
	        </div>

					<div class="hexCont">
            <div class="hexagon hexagonDone hexagon--two">
							<span class="vueBlock">
								<a class="vueBlock__link" href="1">Vue link</a>
							</span>
						</div>
	        </div>

					<div class="hexCont">
						<div class="hexagon hexagonDone hexagon--three">
							<span class="vueBlock">
								<a class="vueBlock__link" href="2">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon hexagonDone hexagon--four">
							<span class="vueBlock">
								<a class="vueBlock__link" href="3">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>
		    </li>

				<li class="list__item">
					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>
				</li>

				<li class="list__item">
					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>
				</li>

				<li class="list__item">
					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>

					<div class="hexCont">
						<div class="hexagon">
							<span class="vueBlock">
								<a class="vueBlock__link" href="">Vue link</a>
							</span>
						</div>
					</div>
				</li>
			</ul>

			<div class="contact">
				<p class="contact__title">Portfolio</p>
				<a class="contact__mail" href="mailto:kailketch@gmail.com">kailketch@gmail.com</a>
			</div>
		</div>

	<script>
		let listItem = document.getElementsByTagName('li');
		let count = -60;

		for (var i = 0; i < listItem.length; i++) {
			listItem[i].style.transform = 'translateY('+count+'px)';
			count-=50;
		}

		let popUp = document.getElementById('popUp');
		let linkContainer = document.getElementById('vueLink__container');
		let proName = document.getElementById('name');
		let proSkillUse = document.getElementById('skillUse');
		let vueLink = document.getElementById('popUp__vueLink');
		let openerLinkCont = document.getElementsByClassName('hexagonDone');
		let links = [];

		for (let i = 0; i < openerLinkCont.length; i++) {
			links.push(openerLinkCont[i].querySelector('a'));
		}

		for (let i = 0; i < links.length; i++) {
			links[i].addEventListener("click", aClick, false);
		}

		function aClick(e) {
			try { e.preventDefault(); }
			catch (x) { e.returnValue = false; }
			let num = this.getAttribute('href');

			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var portfolioContent = JSON.parse(this.responseText);

					proName.innerText = portfolioContent[num].title;
					popUp.style.backgroundImage = 'url('+portfolioContent[num].img+')'
					proSkillUse.innerText = portfolioContent[num].description;

					let childLink = linkContainer.childNodes;

					while (true) {
						if (childLink.length != 0) {
							childLink[0].remove()
						} else {
							break;
						}
					}

					let ObjElem = portfolioContent[num].vueLink;

					for (let i = 0; i < ObjElem.length; i++) {
						var linkElem = document.createElement('a');
						linkElem.setAttribute('href', ObjElem[i].src)
						var linkContent = document.createTextNode(ObjElem[i].title);
						linkElem.appendChild(linkContent);
						linkContainer.appendChild(linkElem);
					}

					e = e || event;
					var popup = document.getElementsByClassName("popUp__container")[0];

					if (popup.style.transform == 'translateY(0px)') {
						popup.style.transform = 'translateY(-100vh)';
					} else {
						popup.style.transform = 'translateY(0px)';
					};
				}
			};
			xmlhttp.open("GET", "./obj.json", true);
			xmlhttp.send();
		};

		window.onclick = function (e) {
			if (!e.target.matches('#popUp') && e.target.matches('.popUp__container')) {
				var dropdowns = document.getElementsByClassName("popUp__container")[0];
					if (dropdowns.style.transform == 'translateY(0px)') {
							dropdowns.style.transform = 'translateY(-100vh)';
					};
			};
		};
	</script>

	</body>
</html>
